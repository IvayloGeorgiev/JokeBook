// list joke details
.container(ng-controller="JokeDetailsCtrl")

    .col-md-8(ng-hide="invalidUrl")
        .col-md-12.buffer
                h3 {{joke.title}}

        .col-md-12.likes.buffer(ng-class="joke.likes >= 0 ? 'positive' : 'negative' ") Likes: {{joke.likes}}

        .row.buffer
            .col-md-11.col-md-offset-1.well {{joke.body}}

        .row.buffer
            .col-md-6
                ul.tag-list
                    li Tags:&nbsp
                    li(ng-repeat="tag in joke.tags")
                        a(href="#/tags/{{tag}}") {{tag}}
                        | &nbsp

            .col-md-6.pull-right
                | posted by &nbsp
                a(href="#/users/{{joke.user._id}}") {{joke.user.username}}
                | &nbspon {{joke.date | date:'medium'}}

        a.btn.btn-primary(href="#/joke/{{joke._id}}/edit", ng-show="canEdit") Edit

        .row
            .col-md-10
                h2.buffer Comments
            .col-md-2(ng-show="identity.isAuthenticated()")
                p.btn.btn-primary(ng-click="enablePostComment()") Post comment

        .row(ng-show="enablePost")
            .col-md-12.comment-post
                textarea.form-control(placeholder="Comment", ng-model="comment.text")
            .col-md-3.pull-right
                .col-md-6
                    p.btn.btn-primary(ng-click="postComment(comment)") Post
                .col-md-6
                    p.btn.btn-primary(ng-click="cancelComment()") Cancel


        .col-md-12.well(ng-repeat="comment in joke.comments")
            .col-md-12
                img(width="20" heigth="20"  src="{{comment.user.avatar}}")
                a(href="#/user-details/{{comment.user._id}}"){{comment.user.username}}
                | &nbspon {{comment.date | date: 'medium'}}
            .col-md-11.comment-offset
                | {{comment.text}}

    .col-md-12(ng-show="invalidUrl")
        h2.center-text Invalid post id!